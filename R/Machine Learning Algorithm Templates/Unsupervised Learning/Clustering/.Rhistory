### *** Play counts *** ###
lastfm <- read.csv(file.choose(), header = T)
lastfm[1:19,]
length(lastfm$user) #289955 records in file
str(lastfm)
summary(lastfm)
levels(lastfm$user) ##15000 users
levels(lastfm$artist) ## 1004 artists
lastfm$user <- factor(lastfm$user)
levels(lastfm$user) ##15000 users
levels(lastfm$artist) ## 1004 artists
str(lastfm)
lastfm <- read.csv(file.choose(), header = T)
lastfm[1:19,]
length(lastfm$user) #289955 records in file
str(lastfm)
summary(lastfm)
install.packages("arules")
library(arules)
#we need to manipulate the data a bit for arules
playlist <- split(x=lastfm[,"artist"], f=lastfm$user) # split into a list of users
playlist
playlist <- lapply(playlist, unique) #remove artist duplicates
playlist[1:2] # the first 2 listeners (1 and 3) listen to the following bands
playlist <- as(playlist,"transactions")
# view this as a list of transcations
# transaction is a data class defined in arules
playlist[1:2]
summary(playlist)
str(playlist)
itemFrequency(playlist)
#list support of the 1004 bands
# number of times band is listed to on the shopping trips of 15000 users
# computes the rel frequency each artist mentioned by the 15000 users
itemFrequencyPlot(playlist,support=0.08, cex.names = 1.5)
# Fianlly, we build the assiciation rules
# only rules with support > 0.01 and confidence > 0.50
# so it cant be a super rare band
musicrules <- apriori(playlist,parameter = list(support=0.01, confidence =.5))
inspect(musicrules)
musicrules <- apriori(playlist,parameter = list(support=0.9, confidence =.5))
inspect(musicrules)
musicrules <- apriori(playlist,parameter = list(support=0.1, confidence =.5))
inspect(musicrules)
musicrules <- apriori(playlist,parameter = list(support=0.01, confidence =.5))
inspect(musicrules)
itemFrequencyPlot(playlist,support=0.08, cex.names = 1.5, lift = TRUE)
itemFrequencyPlot(playlist,support=0.08, cex.names = 1.5, Lift = TRUE)
itemFrequencyPlot(playlist,support=0.08, cex.names = 1.5)
playlist[1:2] # the first 2 listeners (1 and 3) listen to the following bands
inspect(musicrules)
